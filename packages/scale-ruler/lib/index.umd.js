(function(n,m){typeof exports=="object"&&typeof module<"u"?module.exports=m(require("vue")):typeof define=="function"&&define.amd?define(["vue"],m):(n=typeof globalThis<"u"?globalThis:n||self,n.ScaleRuler=m(n.Vue))})(this,function(n){"use strict";const m=n.defineComponent({__name:"CanvasPanel",props:{containerInfo:{type:Object},opt:Object},setup(i){const s=i,a=n.computed(()=>{var c,f;return{position:"absolute",left:0,top:0,width:((c=s.opt)==null?void 0:c.canvasWidth)+"px",height:((f=s.opt)==null?void 0:f.canvasHeight)+"px",transition:"transform 300ms",transformOrigin:"0 0"}});return(c,f)=>(n.openBlock(),n.createElementBlock("div",{ref:"canvasPanel",style:n.normalizeStyle(a.value)},null,4))}});function A(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var C,_;function w(){if(_)return C;_=1;var i=function(t){return s(t)&&!a(t)};function s(e){return!!e&&typeof e=="object"}function a(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||S(e)}var c=typeof Symbol=="function"&&Symbol.for,f=c?Symbol.for("react.element"):60103;function S(e){return e.$$typeof===f}function j(e){return Array.isArray(e)?[]:{}}function g(e,t){return t.clone!==!1&&t.isMergeableObject(e)?b(j(e),e,t):e}function l(e,t,r){return e.concat(t).map(function(d){return g(d,r)})}function p(e,t){if(!t.customMerge)return b;var r=t.customMerge(e);return typeof r=="function"?r:b}function h(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function y(e){return Object.keys(e).concat(h(e))}function u(e,t){try{return t in e}catch{return!1}}function v(e,t){return u(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function W(e,t,r){var d={};return r.isMergeableObject(e)&&y(e).forEach(function(o){d[o]=g(e[o],r)}),y(t).forEach(function(o){v(e,o)||(u(e,o)&&r.isMergeableObject(t[o])?d[o]=p(o,r)(e[o],t[o],r):d[o]=g(t[o],r))}),d}function b(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||l,r.isMergeableObject=r.isMergeableObject||i,r.cloneUnlessOtherwiseSpecified=g;var d=Array.isArray(t),o=Array.isArray(e),R=d===o;return R?d?r.arrayMerge(e,t,r):W(e,t,r):g(t,r)}b.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(d,o){return b(d,o,r)},{})};var P=b;return C=P,C}var E=w();const M=A(E),O={scale:1,canScale:!0,maxScale:10,minScale:.1,autoCenter:!0,autoScale:!0,containerAutoSize:!1,containerWidth:1e3,containerHeight:500,containerXPadding:80,containerYPadding:80,canvasWidth:1920,canvasHeight:2e3,proxyScaleKey:!0,useScrollBar:!0,useRuler:!0,usePositionLine:!0,positionLineConfig:{lineColor:"#24aa61",padding:3,adsorptionXList:[],adsorptionYList:[],adsorptionGap:4},canvasStyle:{},scrollBarConfig:{bgColor:"#000000",opacity:.4},rulerConfig:{yRulerWidth:30,xRulerHeight:30,bgColor:"#efefef",fontColor:"#000000",fontSize:12,fontFamily:"Arial",lineColor:"#000000"},onScale:()=>{},onMove:()=>{}},B=function(){const i={};for(const s in O){const a=O[s];typeof a=="object"&&a!==null?i[s]=()=>a:i[s]=a}return i}();return n.defineComponent({__name:"ScaleRuler",props:n.mergeDefaults({scale:{},minScale:{},maxScale:{},canScale:{type:Boolean},autoCenter:{type:Boolean},autoScale:{type:Boolean},containerAutoSize:{type:Boolean},containerWidth:{},containerHeight:{},containerXPadding:{},containerYPadding:{},canvasWidth:{},canvasHeight:{},proxyScaleKey:{type:Boolean},useScrollBar:{type:Boolean},useRuler:{type:Boolean},usePositionLine:{type:Boolean},positionLineConfig:{},canvasStyle:{},scrollBarConfig:{},rulerConfig:{},onScale:{type:Function},onMove:{type:Function}},B),setup(i){const s=i,a=n.ref(O);n.watch(()=>s,()=>{a.value=M(a.value,s),console.log(a.value)},{deep:!0});const c=n.reactive({}),f=n.reactive({}),S=n.ref(null);function j(){if(!S.value)return;const l=S.value;let p=0,h=0;const y=a.value;if(y.containerAutoSize)p=l.offsetWidth,h=l.offsetHeight,c.originWidth=p,c.originHeight=h,c.hasAddResize||g(l);else{if(!y.containerWidth||!y.containerHeight)throw Error("");p=y.containerWidth,h=y.containerHeight,f.width=p,f.height=h}const u=getComputedStyle(l);u.boxSizing==="border-box"&&(p-=parseFloat(u.borderLeftWidth)+parseFloat(u.borderRightWidth),h-=parseFloat(u.borderTopWidth)+parseFloat(u.borderBottomWidth)),c.width=p,c.height=h,u.position==="static"&&(f.position="relative"),f.overflow="hidden"}function g(l){c.hasAddResize=!0,new ResizeObserver(h=>{for(const y of h)if(y.target===l){const u=l.offsetWidth,v=l.offsetHeight;(u!==c.originWidth||v!==c.originHeight)&&j()}}).observe(l)}return n.onMounted(()=>{a.value=M(O,s),j()}),(l,p)=>(n.openBlock(),n.createElementBlock("div",{ref_key:"container",ref:S,style:n.normalizeStyle(f)},[n.createVNode(m,{"container-info":c,opt:a.value},{default:n.withCtx(()=>[n.renderSlot(l.$slots,"default")]),_:3},8,["container-info","opt"])],4))}})});
