(function(e,_){typeof exports=="object"&&typeof module<"u"?module.exports=_(require("vue")):typeof define=="function"&&define.amd?define(["vue"],_):(e=typeof globalThis<"u"?globalThis:e||self,e.ScaleRuler=_(e.Vue))})(this,function(e){"use strict";const _=e.defineComponent({__name:"CanvasPanel",props:{containerInfo:{type:Object,required:!0},opt:{type:Object,required:!0},canvasInfo:{type:Object,required:!0}},setup(f){const r=f,t=e.computed(()=>{var a,i;return{position:"absolute",left:0,top:0,width:((a=r.opt)==null?void 0:a.canvasWidth)+"px",height:((i=r.opt)==null?void 0:i.canvasHeight)+"px",transition:"transform 300ms",transformOrigin:"0 0",transform:`translate(${r.canvasInfo.translateX}px, ${r.canvasInfo.translateY}px) scale(${r.canvasInfo.scale})`,...r.opt.canvasStyle}});return(a,i)=>(e.openBlock(),e.createElementBlock("div",{ref:"canvasPanel",style:e.normalizeStyle(t.value)},null,4))}}),Y=e.defineComponent({__name:"ScrollBar",props:{containerInfo:{type:Object,required:!0},opt:{type:Object,required:!0},isY:{type:Boolean,default:!1},scrollBarInfo:{type:Object,required:!0},globalInfo:{type:Object,required:!0},transformInfo:{type:Object,required:!0}},setup(f){const r=f,{globalInfo:t,transformInfo:a}=e.toRefs(r),i=e.computed(()=>{const{opt:o,scrollBarInfo:n,isY:d}=r,{scrollBarConfig:l}=o,g={position:"absolute",borderRadius:"4px",backgroundColor:l.bgColor,opacity:r.globalInfo[d?"yOpacity":"xOpacity"]||0,transition:"opacity 300ms",cursor:"pointer",zIndex:l.zIndex,width:(d?l.barSize:n.width)+"px",height:(d?n.height:l.barSize)+"px"};return d?(g.top=n.top+"px",g.right=0):(g.left=n.left+"px",g.bottom=0),g}),p=e.ref(null),s={};function c(o){if(o.preventDefault(),!t.value.scrollBarMouseDown)return;let{translateX:n,translateY:d}=a.value;const l=r.scrollBarInfo,{width:g,height:u}=r.containerInfo;if(r.isY){const v=o.pageY-s.startY;let b=s.top+v;b=Math.min(Math.max(0,b),u-l.height);const S=b*l.totalHeight/u;d=r.opt.containerYPadding-S,a.value.translateY=d}else{const v=o.pageX-s.startX;let b=s.left+v;b=Math.min(Math.max(0,b),g-l.width);const S=b*l.totalWidth/g;n=r.opt.containerXPadding-S,a.value.translateX=n}}return e.onMounted(()=>{if(p.value){const o=p.value,n=r.isY?"yOpacity":"xOpacity";o.addEventListener("mouseenter",()=>{t.value[n]=r.opt.scrollBarConfig.opacity,t.value[r.isY?"xOpacity":"yOpacity"]=0,t.value.scrollBarEnter=!0}),o.addEventListener("mouseleave",()=>{t.value.scrollBarMouseDown||(t.value.scrollBarEnter=!1,t.value[n]=0)}),o.addEventListener("mousedown",d=>{d.preventDefault(),t.value.scrollBarMouseDown=!0,s.startX=d.pageX,s.startY=d.pageY,s.left=r.scrollBarInfo.left,s.top=r.scrollBarInfo.top,document.addEventListener("mousemove",c)}),document.addEventListener("mouseup",()=>{t.value.scrollBarMouseDown&&(t.value.scrollBarMouseDown=!1,document.removeEventListener("mousemove",c))})}}),(o,n)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"scrollBarRef",ref:p,style:e.normalizeStyle(i.value)},null,4))}}),H=f=>f<=.25?40:f<=.5?20:f<=1?10:f<=2?5:f<=4?2:1,D=f=>{const r=f.getBoundingClientRect(),t=r.top+(document.body.scrollTop||document.documentElement.scrollTop),a=r.left+(document.body.scrollLeft||document.documentElement.scrollLeft);return{top:t,left:a}},j=(f,r,t)=>{const{scale:a,translateX:i,translateY:p}=f;return(r-(t?p:i))/a},X=(f,r,t)=>{const{scale:a,translateX:i,translateY:p}=f,s=r*a;return(t?p:i)+s};function I(f,r,t,a,i,p){const s={coordinate:i,translate:a},c=f.length;if(c>0){let o=0;for(;o<c;){const n=f[o];if(Math.abs(i-n)<=t){s.coordinate=n,s.translate=X(r,n,p);break}else if(n>i)break;o++}}return s}const q=(f,r,t,a)=>{e.nextTick(()=>{const i=a.value;if(i){const p=i.offsetWidth,s=i.offsetHeight,{rulerConfig:c}=f,{bgColor:o,fontFamily:n,fontSize:d,lineColor:l,fontColor:g}=c;if(p>0&&s>0){const u=i.getContext("2d");u.clearRect(0,0,p,s),o&&(u.save(),u.fillStyle=o,u.fillRect(0,0,p,s),u.restore());const v=t?c.yRulerWidth:c.xRulerHeight,{translateX:b,translateY:S,scale:h}=r,y=t?S:b,m=H(h),w=m*h,x=window.devicePixelRatio,M=-y,L=Math.floor(M/w),E=Math.floor(((t?s:p)-y)/w);u.save(),u.fillStyle=l,u.font=`${d*x}px ${n}`,u.translate(.5,.5),u.scale(1/x,1/x),t?u.fillRect((v-1)*x,0,1,s*x):u.fillRect(0,(v-1)*x,p*x,1);for(let O=L;O<=E;O++){u.fillStyle=l;const B=(y+O*w)*x;let C=v/4;O%10===0?C=v*4/5:O%5===0&&(C=v/3),t?u.fillRect((v-C)*x,B,C*x,1):(u.fillRect(B,(v-C)*x,1,C*x),O%10===0&&(u.fillStyle=g,u.fillText(String(O*m),B+2*x,(v+8-C)*x)))}if(u.restore(),t){u.font=`${d}px ${n}`;let O=L;for(;O<=E;)if(O%10)O++;else{u.save();const B=y+O*w+v/2;u.translate(B+v/5,B-v*6/5),u.rotate(Math.PI/2),u.fillText(String(O*m),v*4/5,B),O+=10,u.restore()}}}}})},$=(f,r)=>{const t=e.reactive([0]);function a(n,d=!0){const l=t.indexOf(n);d&&l===-1&&t.push(n),!d&&l>-1&&t.splice(l,1)}function i(n,d=!0){Array.isArray(n)?n.forEach(l=>a(l,d)):a(n,d)}function p(n){i(n),t.sort((d,l)=>d-l)}function s(n){i(n,!1)}const c=e.computed(()=>f.positionLineConfig[r?"adsorptionYList":"adsorptionXList"]);e.watch(()=>c.value,n=>{p(n)},{deep:!0});const o=e.computed(()=>r?f.canvasWidth:f.canvasHeight);return e.watch(()=>o.value,(n,d)=>{d!==void 0&&s(d),p(n)},{immediate:!0}),{adsorptionList:t}},F=(f,r,t,a,i,p)=>{let s=1;const c=e.reactive([]);let o=-1,n=!1;function d(l){if(n&&o>-1){l.preventDefault();const{xRulerHeight:g,yRulerWidth:u}=f.value.rulerConfig,v=c[o],b=(i?l.pageY:l.pageX)-v.start,S=v.startTranslate+b,h=S>(i?g:u),y=j(a.value,S,i),m=I(t,a.value,f.value.positionLineConfig.adsorptionGap,S,y,i);c[o].showTip=h,c[o].translate=m.translate,c[o].coordinate=m.coordinate}}return e.onMounted(()=>{if(p.value){const l=p.value;l.addEventListener("mousedown",g=>{const u=D(l),v=i?g.pageY:g.pageX,b=v-(i?u.top:u.left),S={startTranslate:b,translate:b,start:v,id:s,coordinate:j(a.value,b,i),showTip:!1,needAnimate:!1};o=s,c[s++]=S,n=!0,document.addEventListener("mousemove",d)}),document.addEventListener("mouseup",()=>{if(document.removeEventListener("mousemove",d),!n||o<0)return;n=!1;const g=c[o],{width:u,height:v}=r.value,{xRulerHeight:b,yRulerWidth:S}=f.value.rulerConfig;g.translate<=(i?b:S)||g.translate>=(i?v:u)?delete c[o]:(c[o].showTip=!1,c[o].needAnimate=!0),o=-1})}}),{positionLineMap:c}},N=(f,r,t,a,i,p,s,c)=>{let o=!1;function n(l){s.value.showTip=l}function d(l){if(!o)return;const g=(i?l.pageY:l.pageX)-s.value.start,u=s.value.startTranslate+g,v=j(a.value,u,i),b=I(t.value,a.value,f.value.positionLineConfig.adsorptionGap,u,v,i);s.value.coordinate=b.coordinate}e.onMounted(()=>{if(p.value){const l=p.value;l.addEventListener("mouseenter",()=>{n(!0)}),l.addEventListener("mouseleave",()=>{o||n(!1)}),l.addEventListener("mousedown",g=>{g.preventDefault(),o=!0,s.value.showTip=!0;const u=i?g.pageY:g.pageX;s.value.start=u,s.value.startTranslate=s.value.translate,s.value.needAnimate=!1,document.addEventListener("mousemove",d)}),document.addEventListener("mouseup",()=>{if(!o)return;const{translate:g,id:u}=s.value,{width:v,height:b}=r.value,{xRulerHeight:S,yRulerWidth:h}=f.value.rulerConfig;g<=(i?S:h)||g>=(i?b:v)?c(u):(n(!1),s.value.needAnimate=!0),document.removeEventListener("mousemove",d)})}})},V=e.defineComponent({__name:"PositionLine",props:{containerInfo:{type:Object,required:!0},opt:{type:Object,required:!0},isY:{type:Boolean,default:!1},transformInfo:{type:Object,required:!0},lineInfo:{type:Object,required:!0},adsorptionList:{type:Array,required:!0}},emits:["remove-position-line"],setup(f,{emit:r}){const t=f,{lineInfo:a,adsorptionList:i,transformInfo:p,opt:s,containerInfo:c}=e.toRefs(t),o=e.computed(()=>s.value.positionLineConfig.padding),n=e.computed(()=>2*o.value+1),d=e.computed(()=>X(p.value,a.value.coordinate,t.isY)),l=e.computed(()=>{const{width:m,height:w}=c.value,{isY:x}=t,M=x?`translate(0, ${d.value}px)`:`translate(${d.value}px, 0)`;return{position:"absolute",width:(x?m:n.value)+"px",height:(x?n.value:w)+"px",cursor:x?"row-resize":"col-resize",top:(x?-o.value:0)+"px",left:(x?0:-o.value)+"px",transform:M,zIndex:t.opt.positionLineConfig.zIndex,transition:a.value.needAnimate?"transform 300ms":""}}),g=e.computed(()=>{const{isY:m}=t;return{position:"absolute",width:m?"100%":"1px",height:m?"1px":"100%",backgroundColor:s.value.positionLineConfig.lineColor,top:(m?o.value:0)+"px",left:(m?0:o.value)+"px"}}),u=e.ref({}),v=e.computed(()=>{const{isY:m}=t,{width:w,height:x}=c.value,{tipWidth:M,tipHeight:L}=u.value;let E,O;return M&&L?(O=m?"50%":(d.value+n.value+M>=w?-M:n.value)+"px",E=m?(d.value+n.value+L>=x?-L:n.value)+"px":"50%"):(O=m?"50%":n.value+"px",E=m?n.value+"px":"50%"),{position:"absolute",padding:"5px",lineHeight:"18px",minWidth:"80px",backgroundColor:"rgba(0,0,0,.8)",color:"#fff",fontSize:"12px",borderRadius:"4px",userSelect:"none",textAlign:"center",left:O,top:E,transform:m?"translate(-50%, 0)":"translate(0, -50%)",visibility:a.value.showTip?"visible":"hidden"}}),b=e.ref(null),S=r;function h(m){S("remove-position-line",m)}N(s,c,i,p,t.isY,b,a,h);const y=e.ref(null);return e.onMounted(()=>{if(y.value){const m=y.value,w=m.offsetWidth,x=m.offsetHeight;u.value.tipWidth=w,u.value.tipHeight=x}}),(m,w)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"positionLineRef",ref:b,class:"scale-ruler_position-line",style:e.normalizeStyle(l.value)},[e.createElementVNode("div",{class:"scale-ruler_position-line_inner",style:e.normalizeStyle(g.value)},null,4),e.createElementVNode("div",{class:"scale-ruler_position-line_tip",style:e.normalizeStyle(v.value),ref_key:"tipRef",ref:y},e.toDisplayString((f.isY?"Y":"X")+": "+ +e.unref(a).coordinate.toFixed(2)+" px"),5)],4))}}),K=["width","height"],W=e.defineComponent({__name:"Ruler",props:{containerInfo:{type:Object,required:!0},opt:{type:Object,required:!0},canvasInfo:{type:Object,required:!0},isY:{type:Boolean,default:!1},transformInfo:{type:Object,required:!0}},setup(f){const r=f,{opt:t,transformInfo:a,containerInfo:i}=e.toRefs(r),p=e.computed(()=>{const{isY:l,containerInfo:g,opt:u}=r;return{width:l?u.rulerConfig.yRulerWidth:g.width,height:l?g.height:u.rulerConfig.xRulerHeight}}),s=e.computed(()=>({position:"absolute",left:0,top:0,zIndex:r.opt.rulerConfig.zIndex+(r.isY?0:1)})),c=e.ref();e.watch([()=>r.containerInfo,()=>r.canvasInfo],()=>{q(r.opt,r.canvasInfo,r.isY,c)},{deep:!0});const{adsorptionList:o}=$(r.opt,r.isY),{positionLineMap:n}=F(t,i,o,a,!r.isY,c);function d(l){delete n[l]}return(l,g)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("canvas",{ref_key:"rulerRef",ref:c,style:e.normalizeStyle(s.value),width:p.value.width,height:p.value.height},null,12,K),r.opt.usePositionLine?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass("position-line-"+(r.isY?"x":"y"))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Object.keys(e.unref(n)),u=>(e.openBlock(),e.createBlock(V,{key:u,opt:r.opt,"is-y":!r.isY,"transform-info":r.transformInfo,"container-info":r.containerInfo,"line-info":e.unref(n)[u],"adsorption-list":e.unref(o),onRemovePositionLine:d},null,8,["opt","is-y","transform-info","container-info","line-info","adsorption-list"]))),128))],2)):e.createCommentVNode("",!0)],64))}});function G(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var R,z;function U(){if(z)return R;z=1;var f=function(y){return r(y)&&!t(y)};function r(h){return!!h&&typeof h=="object"}function t(h){var y=Object.prototype.toString.call(h);return y==="[object RegExp]"||y==="[object Date]"||p(h)}var a=typeof Symbol=="function"&&Symbol.for,i=a?Symbol.for("react.element"):60103;function p(h){return h.$$typeof===i}function s(h){return Array.isArray(h)?[]:{}}function c(h,y){return y.clone!==!1&&y.isMergeableObject(h)?b(s(h),h,y):h}function o(h,y,m){return h.concat(y).map(function(w){return c(w,m)})}function n(h,y){if(!y.customMerge)return b;var m=y.customMerge(h);return typeof m=="function"?m:b}function d(h){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(h).filter(function(y){return Object.propertyIsEnumerable.call(h,y)}):[]}function l(h){return Object.keys(h).concat(d(h))}function g(h,y){try{return y in h}catch{return!1}}function u(h,y){return g(h,y)&&!(Object.hasOwnProperty.call(h,y)&&Object.propertyIsEnumerable.call(h,y))}function v(h,y,m){var w={};return m.isMergeableObject(h)&&l(h).forEach(function(x){w[x]=c(h[x],m)}),l(y).forEach(function(x){u(h,x)||(g(h,x)&&m.isMergeableObject(y[x])?w[x]=n(x,m)(h[x],y[x],m):w[x]=c(y[x],m))}),w}function b(h,y,m){m=m||{},m.arrayMerge=m.arrayMerge||o,m.isMergeableObject=m.isMergeableObject||f,m.cloneUnlessOtherwiseSpecified=c;var w=Array.isArray(y),x=Array.isArray(h),M=w===x;return M?w?m.arrayMerge(h,y,m):v(h,y,m):c(y,m)}b.all=function(y,m){if(!Array.isArray(y))throw new Error("first argument should be an array");return y.reduce(function(w,x){return b(w,x,m)},{})};var S=b;return R=S,R}var J=U();const P=G(J),T={scale:1,canScale:!0,maxScale:10,minScale:.1,autoCenter:!0,autoScale:!0,containerAutoSize:!1,containerWidth:1e3,containerHeight:500,containerXPadding:80,containerYPadding:80,canvasWidth:1920,canvasHeight:2e3,proxyScaleKey:!0,useScrollBar:!0,useRuler:!0,usePositionLine:!0,positionLineConfig:{lineColor:"#24aa61",padding:3,adsorptionXList:[],adsorptionYList:[],adsorptionGap:4,zIndex:300},canvasStyle:{},scrollBarConfig:{bgColor:"#000000",opacity:.4,zIndex:500,barSize:8},rulerConfig:{yRulerWidth:30,xRulerHeight:30,bgColor:"#efefef",fontColor:"#000000",fontSize:12,fontFamily:"Arial",lineColor:"#000000",zIndex:400},onScale:()=>{},onMove:()=>{}},Q=function(){const f={};for(const r in T){const t=T[r];typeof t=="object"&&t!==null?f[r]=()=>t:f[r]=t}return f}(),Z=(f,r)=>{const t=e.reactive({width:0,height:0,originWidth:0,originHeight:0});function a(c,o){new ResizeObserver(d=>{for(const l of d)if(l.target===o){const g=o.offsetWidth,u=o.offsetHeight;(g!==t.originWidth||u!==t.originHeight)&&i(c,o)}}).observe(o)}function i(c,o,n=!1){const d=c.value;d.containerAutoSize?(t.width=o.offsetWidth,t.height=o.offsetHeight,t.originWidth=t.width,t.originHeight=t.height,n&&a(c,o)):(t.width=d.containerWidth,t.height=d.containerHeight);const l=getComputedStyle(o);l.boxSizing==="border-box"&&(t.width-=parseFloat(l.borderLeftWidth)+parseFloat(l.borderRightWidth),t.height-=parseFloat(l.borderTopWidth)+parseFloat(l.borderBottomWidth)),l.position==="static"&&(t.position="relative")}e.onMounted(()=>{const c=r.value;c&&i(f,c,!0)});const p=e.computed(()=>({width:t.width,height:t.height})),s=e.computed(()=>{const c=f.value,o={overflow:"hidden"};return c.containerAutoSize||(o.width=t.width+"px",o.height=t.height+"px"),t.position&&(o.position=t.position),o});return{containerInfo:p,containerStyle:s}},ee=(f,r)=>{const t=e.reactive({});return e.watch(()=>r.value,()=>{const a=f.value;let i=0,p=0,{scale:s}=a;const{autoCenter:c,autoScale:o}=a,{width:n,height:d}=r.value;if(o){const u=(n-2*a.containerXPadding)/a.canvasWidth,v=(d-2*a.containerYPadding)/a.canvasHeight;s=Math.min(u,v)}t.scale=s;let l=0,g=0;i=a.canvasWidth*s,p=a.canvasHeight*s,c&&(l=Math.floor((n-i)/2),g=Math.floor((d-p)/2),t.translateX=l,t.translateY=g)},{deep:!0}),{transformInfo:t}},te=(f,r,t)=>({scrollBarInfo:e.computed(()=>{const i=f.value,{width:p,height:s}=r.value,{translateX:c,translateY:o,scale:n}=t,d=i.canvasWidth*n+2*i.containerXPadding,l=i.canvasHeight*n+2*i.containerYPadding,g=p<d,u=s<l,v=g||u,b=p*((i.containerXPadding-c)/d),S=s*((i.containerYPadding-o)/l),h=p/d*p,y=s/l*s;return{totalHeight:l,totalWidth:d,left:b,top:S,width:h,height:y,isYLarge:u,isXLarge:g,isLarge:v}})});function k(f,r,t){const a=f.value,{containerXPadding:i,containerYPadding:p,canvasWidth:s,canvasHeight:c}=a,o=s*t,n=c*t,{width:d,height:l}=r.value,g=Math.max((d-o)/2,i),u=Math.max((l-n)/2,p),v=o+2*i>d?d-(o+i):g,b=n+2*p>l?l-(n+p):u;return{maxTranslateX:g,maxTranslateY:u,minTranslateX:v,minTranslateY:b}}const ne=(f,r,t)=>({boundaryInfo:e.computed(()=>k(f,r,t.scale))}),A=(f,r,t,a)=>{const i=f.value;let{translateX:p,translateY:s,scale:c}=t;a=Math.min(Math.max(a,i.minScale),i.maxScale);const o=a-c,n=k(f,r,a);p-=o*i.canvasWidth/2,s-=o*i.canvasHeight/2,p=Math.max(Math.min(p,n.maxTranslateX),n.minTranslateX),s=Math.max(Math.min(s,n.maxTranslateY),n.minTranslateY),t.scale=a,t.translateX=p,t.translateY=s},oe=(f,r,t)=>{f.value.proxyScaleKey&&document.addEventListener("keydown",a=>{if(f.value.canScale){const i=a.keyCode;if((a.metaKey||a.ctrlKey)&&(i===187||i===189)){a.preventDefault();const p=t.scale+(i===187?.05:-.05);A(f,r,t,p)}}})},re=(f,r,t,a,i,p,s)=>{let c=null;Object.assign(s,{xOpacity:0,yOpacity:0,scrollBarMouseDown:!1,scrollBarEnter:!1}),e.onMounted(()=>{i.value&&i.value.addEventListener("wheel",o=>{if(f.value.canScale)if(o.metaKey||o.ctrlKey){o.preventDefault();const n=-1*o.deltaY/100,d=t.scale+n;A(f,r,t,d)}else{if(!p.value.isLarge||s.scrollBarMouseDown)return;o.preventDefault();let{translateX:n,translateY:d}=t;c&&clearTimeout(c);const l=-o.deltaX,g=-o.deltaY;let u="";const{opacity:v=.4}=f.value.scrollBarConfig,{isXLarge:b,isYLarge:S}=p.value,{maxTranslateX:h,minTranslateX:y,maxTranslateY:m,minTranslateY:w}=a.value;b&&Math.abs(l)>Math.abs(g)&&(n+=l,n=Math.max(Math.min(n,h),y),s.xOpacity=v,s.yOpacity=0,t.translateX=n,u="x"),S&&Math.abs(g)>Math.abs(l)&&(u="y",d+=g,d=Math.max(Math.min(d,m),w),s.yOpacity=v,s.xOpacity=0,t.translateY=d),u&&(c=setTimeout(()=>{s.scrollBarEnter||(s[u==="y"?"yOpacity":"xOpacity"]=0)},1e3))}})})};return e.defineComponent({__name:"ScaleRuler",props:e.mergeDefaults({scale:{},minScale:{},maxScale:{},canScale:{type:Boolean},autoCenter:{type:Boolean},autoScale:{type:Boolean},containerAutoSize:{type:Boolean},containerWidth:{},containerHeight:{},containerXPadding:{},containerYPadding:{},canvasWidth:{},canvasHeight:{},proxyScaleKey:{type:Boolean},useScrollBar:{type:Boolean},useRuler:{type:Boolean},usePositionLine:{type:Boolean},positionLineConfig:{},canvasStyle:{},scrollBarConfig:{},rulerConfig:{},onScale:{type:Function},onMove:{type:Function}},Q),setup(f,{expose:r}){const t=f,a=e.ref(P(T,t)),i=e.ref(null),{containerInfo:p,containerStyle:s}=Z(a,i),{transformInfo:c}=ee(a,p),{boundaryInfo:o}=ne(a,p,c),n=e.computed(()=>Object.assign({},c,o.value)),{scrollBarInfo:d}=te(a,p,c),l=e.reactive({}),g=e.watch(()=>c.scale,b=>{if(console.log(b,"--newVal-"),b){const S={scale:b,translateX:c.translateX,translateY:c.translateY};l.scale||Object.assign(l,S),g()}});e.watch(()=>t,()=>{a.value=P(a.value,t)},{deep:!0}),oe(a,p,c);const u=e.reactive({});re(a,p,c,o,i,d,u);function v(){Object.assign(c,l)}return r({reset:v}),(b,S)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"container",ref:i,style:e.normalizeStyle(e.unref(s))},[a.value.useRuler?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(W,{opt:a.value,"container-info":e.unref(p),"canvas-info":n.value,"transform-info":e.unref(c)},null,8,["opt","container-info","canvas-info","transform-info"]),e.createVNode(W,{"is-y":"",opt:a.value,"container-info":e.unref(p),"canvas-info":n.value,"transform-info":e.unref(c)},null,8,["opt","container-info","canvas-info","transform-info"])],64)):e.createCommentVNode("",!0),e.createVNode(_,{"container-info":e.unref(p),opt:a.value,"canvas-info":n.value,"transform-info":e.unref(c)},{default:e.withCtx(()=>[e.renderSlot(b.$slots,"default")]),_:3},8,["container-info","opt","canvas-info","transform-info"]),e.unref(d).isXLarge?(e.openBlock(),e.createBlock(Y,{key:1,opt:a.value,"container-info":e.unref(p),"scroll-bar-info":e.unref(d),"global-info":u,"transform-info":e.unref(c)},null,8,["opt","container-info","scroll-bar-info","global-info","transform-info"])):e.createCommentVNode("",!0),e.unref(d).isYLarge?(e.openBlock(),e.createBlock(Y,{key:2,opt:a.value,"container-info":e.unref(p),"scroll-bar-info":e.unref(d),"global-info":u,"transform-info":e.unref(c),"is-y":""},null,8,["opt","container-info","scroll-bar-info","global-info","transform-info"])):e.createCommentVNode("",!0)],4))}})});
